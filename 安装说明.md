# 安装 说明

[TOC]

## 环境

```bash
C:\Users\83946>node -v
v20.19.1
```

## 根据文档命令执行

> bash

```bash
C:\Andy\C_Disk_Andy_WEBSTORM_WORKSPACE>pnpm create vuepress vuepress-starter
√ Select a language to display / 选择显示语言 简体中文
√ 选择包管理器 pnpm
√ 你想要使用哪个打包器？ webpack
√ 你想要创建什么类型的项目？ blog
生成 package.json...
√ 设置应用名称 andy_blogs
√ 设置应用描述 Andy个人博客
√ 设置应用版本号 1.0.0
√ 设置协议 MIT
√ 是否需要一个自动部署文档到 GitHub Pages 的工作流？ Yes
生成模板...
安装依赖...
这可能需要数分钟，请耐心等待.
我们无法正确输出子进程的进度条，所以进程可能会看似未响应
Packages: +615
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Progress: resolved 711, reused 622, downloaded 0, added 615, done

devDependencies:
+ @vuepress/bundler-webpack 2.0.0-rc.20
+ @vuepress/plugin-blog 2.0.0-rc.86
+ @vuepress/theme-default 2.0.0-rc.88
+ sass-embedded 1.93.3
+ sass-loader 16.0.6
+ vue 3.5.25
+ vuepress 2.0.0-rc.20

╭ Warning ───────────────────────────────────────────────────────────────────────────────────╮
│                                                                                            │
│   Ignored build scripts: esbuild.                                                          │
│   Run "pnpm approve-builds" to pick which dependencies should be allowed to run scripts.   │
│                                                                                            │
╰────────────────────────────────────────────────────────────────────────────────────────────╯

Done in 17.4s using pnpm v10.18.3
模板已成功生成!
√ 是否想要现在启动 Demo 查看? Yes
启动开发服务器...
启动成功后，请在浏览器输入给出的开发服务器地址(默认为 'localhost:8080')

> andy_blogs@1.0.0 docs:dev C:\Andy\C_Disk_Andy_WEBSTORM_WORKSPACE\vuepress-starter
> vuepress dev docs
```

> 特别说明

1. 你想要创建什么类型的项目？
1. 一定要选blog
2. 是否需要一个自动部署文档到 GitHub Pages 的工作流？
    1. 一定要选Yes

> 项目文件修改

1. 在项目的 `.github\workflows`目录下有一个`deploy-docs.yml`文件

    1. 发布到github中，github根据这个文件进行发布部署

2. 这个文件主要有2个要修改的

    1. 第一处

        1. 首先是修改为我们要定义的分支，这边就`static_blog_pages`
        2. 具体是 `部署文档`下的`branch`后的内容

    2. 第二处

        1. 在`部署文档`栏目下的uses下，加上一个之前配置的token，这个`ACCESS_TOKEN`是后续配置secret的name

        2. ```yaml
                 env:
                   GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}
         ```

    3. 完整的2个修改

        1. ```yaml
               - name: 部署文档
                 uses: JamesIves/github-pages-deploy-action@v4
                 env:
                   GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}
                 with:
                   # 这是文档部署到的分支名称
                   branch: static_blog_pages
                   folder: docs/.vuepress/dist
         ```

3. 除此之外还有别的配置，要匹配

    1. 下面这个是官网示例的文件

        1. ```
         name: docs
         
         on:
           # 每当 push 到 main 分支时触发部署
           push:
             branches: [main]
           # 手动触发部署
           workflow_dispatch:
         
         jobs:
           docs:
             runs-on: ubuntu-latest
         
             steps:
               - uses: actions/checkout@v4
                 with:
                   # “最近更新时间” 等 git 日志相关信息，需要拉取全部提交记录
                   fetch-depth: 0
         
               - name: 设置 pnpm
                 uses: pnpm/action-setup@v4
         
               - name: 设置 Node.js
                 uses: actions/setup-node@v4
                 with:
                   # 选择要使用的 node 版本
                   node-version: 22
                   # 缓存 pnpm 依赖
                   cache: pnpm
         
               - name: 安装依赖
                 run: pnpm install --frozen-lockfile
         
               # 运行构建脚本
               - name: 构建 VuePress 站点
                 run: pnpm docs:build
         
               # 查看 workflow 的文档来获取更多信息
               # @see https://github.com/crazy-max/ghaction-github-pages
               - name: 部署到 GitHub Pages
                 uses: crazy-max/ghaction-github-pages@v4
                 with:
                   # 部署到 gh-pages 分支
                   target_branch: gh-pages
                   # 部署目录为 VuePress 的默认输出目录
                   build_dir: docs/.vuepress/dist
                 env:
                   # @see https://docs.github.com/cn/actions/reference/authentication-in-a-workflow#about-the-github_token-secret
                   GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
         ```

## GitHub配置站点

1. 新建一个仓库
2. 除了master分支外，新建另一个分支用于存储静态页面
    1. 我这里的新建分支是`static_blog_pages`，要和上面的`deploy-docs.yml`匹配
3. 进入仓库，点击`Settings`，然后点击左侧边栏的`Pages`,在Branch中选择`static_blog_pages`分支，然后save
    1. 稍等几分钟，刷新页面后，就会有站点了，我这边的站点是：https://octoberskywind.github.io/AndyBlog/
    2. 后续就是从这个站点访问自己的博客
4. 生成AccessToken
    1. 点击用户头像，然后选中`Settings`
    2. 选中左侧边栏的`Developer Settings`
    3. 然后选中左侧边栏`Personal access tokens`
    4. 然后选中 `Token(classic)`
    5. 右上角选中`Generate new toekn`
        1. 同样选中 `classic`
    6. 最终进入`New personal access token (classic)`页面
        1. 创建一个token，设置过期时间（我这边选了1年，也就是2026.11.24到期）
        2. `Select scopes`，这边勾选了`repo`
    7. 最终生成一个Token，然后复制Token
    8. 回到之前的仓库，进入`Settings`
        1. 选择左侧边栏的`Secrets and variables`
        2. 然后选中`Actions`
    9. 进入`Actions`页面后，点击New repository secret
        1. 取个名字，要和之前配置一直，也就是叫 `ACCESS_TOKEN`
        2. 然后将之前的Token复制到下面的`Secret`中
    10. 至此GitHub配置完成

## 将代码上传到GitHub

1. 之前没有初始化git仓库，现在先`git init`，以及配置git忽略文件，然后本地提交
2. 配置远程仓库
3. 最后提交到github中

## 运行说明

1. 运行 `docs:dev` 脚本可以启动开发服务器:
    1. pnpm docs:dev
2. 运行 `docs:build` 脚本可以构建你的网站：
    1. pnpm docs:build
    2. 在 `docs/.vuepress/dist` 目录中可以找到构建生成的静态文件

## 访问说明

1. 因为github给的地址是 https://octoberskywind.github.io/AndyBlog/
2. 所以，需要在 config.ts的base中 加上 /AndyBlog
3. 要付费才能实现仓库公开，Pages,要仓库私有，而Pages公开要付费，升级GitHub
4. 如果公开的仓库变为私有再变回公开，Pages要重新配置才会生效