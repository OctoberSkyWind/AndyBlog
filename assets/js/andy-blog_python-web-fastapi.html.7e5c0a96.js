"use strict";(self.webpackChunkandy_blogs=self.webpackChunkandy_blogs||[]).push([[4714],{1017:(a,t,T)=>{T.r(t),T.d(t,{comp:()=>o,data:()=>i});var n=T(2565);const e={},o=(0,T(7459).A)(e,[["render",function(a,t){return(0,n.uX)(),(0,n.CE)("div",null,[...t[0]||(t[0]=[(0,n.Lk)("p",null,"_# python-web-fastapi",-1),(0,n.Lk)("h4",{id:"fastapi-的http协议版本",tabindex:"-1"},[(0,n.Lk)("a",{class:"header-anchor",href:"#fastapi-的http协议版本"},[(0,n.Lk)("span",null,"fastapi 的http协议版本")])],-1),(0,n.Lk)("blockquote",null,[(0,n.Lk)("p",null,"FastAPI 本身不直接实现 HTTP 协议，底层依赖 Uvicorn 等 ASGI 服务器提供完整的网络支撑，协议版本解析、连接管理、TLS 加密、流量处理均由底层服务器全权负责；FastAPI 仅作为上层应用框架，专注于请求路由、参数校验、接口文档、依赖注入等业务逻辑处理，对 HTTP 协议版本无感知、无直接配置入口。"),(0,n.Lk)("p",null,"默认场景下，Uvicorn 仅启用 HTTP/1.1，无需证书、配置最简单、兼容性最广，可直接满足绝大多数开发与内网部署需求；若要启用 HTTP/2，需配置合法 SSL 证书并通过 ASGI 服务器（如 Uvicorn）启用对应协议，Uvicorn 无需通过 --http=h11/--http=httptools 显式指定（该参数仅控制 HTTP/1.x 解析器），只需配置 SSL 证书后，Uvicorn 会自动通过 ALPN 协商支持 HTTP/2 over TLS；HTTP/2 虽标准支持明文模式（h2c），但主流 ASGI 服务器（包括 Uvicorn）为遵循现代安全最佳实践，仅支持基于 TLS（HTTPS）的 HTTP/2。"),(0,n.Lk)("p",null,"若要启用 HTTP/3，需安装包含 QUIC 协议支持的 Uvicorn 完整版本（如 uvicorn [standard]）、配置兼容 TLS 1.3 的 SSL 证书并指定对应 UDP 端口，HTTP/3 强制依赖 TLS 加密，且目前仍属于 Uvicorn 实验性特性，需通过 --http3（部分旧版本需 --quic，且需配合 --ws quic）等专属参数启用，必须显式指定 --ssl-keyfile/--ssl-certfile 才能生效，生产环境需评估稳定性、兼容性与运维成本后谨慎使用。"),(0,n.Lk)("p",null,"实际部署中通常建议同时保留 HTTP/1.1 兼容，以覆盖老旧客户端、代理、网关等广泛场景；Uvicorn 在正确配置 SSL 并启用 HTTP/3 时，会自动通过 ALPN（应用层协议协商）机制兼容 HTTP/1.1 与 HTTP/2 over TLS，同时通过 UDP 端口提供 HTTP/3 服务，无需额外多端口或多进程配置，只需确保 SSL 证书合法有效、服务器内核与网络环境支持 QUIC/UDP 多路复用、防火墙开放对应 UDP 端口即可。_")],-1)])])}]]),i=JSON.parse('{"path":"/andy-blog/python-web-fastapi.html","title":"","lang":"en-US","frontmatter":{},"headers":[],"git":{"updatedTime":1770387546000,"contributors":[{"name":"xiang.han","username":"","email":"839462320@qq.com","commits":4}],"changelog":[{"hash":"aabbda18162e2f11c3a75eb4acb29af5a7be0931","time":1770387546000,"email":"839462320@qq.com","author":"xiang.han","message":"docs(andy-blog): 更新 fastapi http 协议版本文档格式"},{"hash":"c64f5eb758adb2c5da9cd371f4a3af70d794a1c2","time":1770387449000,"email":"839462320@qq.com","author":"xiang.han","message":"docs(fastapi): 更新 FastAPI HTTP 协议配置文档"},{"hash":"74eb64f8c9c874c323dc22a81b16e65d754472f0","time":1770387151000,"email":"839462320@qq.com","author":"xiang.han","message":"docs(fastapi): 更新 FastAPI HTTP 协议配置文档"},{"hash":"a36c3f59995c2bdddd717f400923b268847150a9","time":1770386362000,"email":"839462320@qq.com","author":"xiang.han","message":"docs(blog): 添加 FastAPI 相关博客文章"}]},"filePathRelative":"andy-blog/python-web-fastapi.md","excerpt":"<p>_# python-web-fastapi</p>\\n<h4>fastapi 的http协议版本</h4>\\n<blockquote>\\n<p>FastAPI 本身不直接实现 HTTP 协议，底层依赖 Uvicorn 等 ASGI 服务器提供完整的网络支撑，协议版本解析、连接管理、TLS 加密、流量处理均由底层服务器全权负责；FastAPI 仅作为上层应用框架，专注于请求路由、参数校验、接口文档、依赖注入等业务逻辑处理，对 HTTP 协议版本无感知、无直接配置入口。</p>\\n<p>默认场景下，Uvicorn 仅启用 HTTP/1.1，无需证书、配置最简单、兼容性最广，可直接满足绝大多数开发与内网部署需求；若要启用 HTTP/2，需配置合法 SSL 证书并通过 ASGI 服务器（如 Uvicorn）启用对应协议，Uvicorn 无需通过 --http=h11/--http=httptools 显式指定（该参数仅控制 HTTP/1.x 解析器），只需配置 SSL 证书后，Uvicorn 会自动通过 ALPN 协商支持 HTTP/2 over TLS；HTTP/2 虽标准支持明文模式（h2c），但主流 ASGI 服务器（包括 Uvicorn）为遵循现代安全最佳实践，仅支持基于 TLS（HTTPS）的 HTTP/2。</p>\\n<p>若要启用 HTTP/3，需安装包含 QUIC 协议支持的 Uvicorn 完整版本（如 uvicorn [standard]）、配置兼容 TLS 1.3 的 SSL 证书并指定对应 UDP 端口，HTTP/3 强制依赖 TLS 加密，且目前仍属于 Uvicorn 实验性特性，需通过 --http3（部分旧版本需 --quic，且需配合 --ws quic）等专属参数启用，必须显式指定 --ssl-keyfile/--ssl-certfile 才能生效，生产环境需评估稳定性、兼容性与运维成本后谨慎使用。</p>\\n<p>实际部署中通常建议同时保留 HTTP/1.1 兼容，以覆盖老旧客户端、代理、网关等广泛场景；Uvicorn 在正确配置 SSL 并启用 HTTP/3 时，会自动通过 ALPN（应用层协议协商）机制兼容 HTTP/1.1 与 HTTP/2 over TLS，同时通过 UDP 端口提供 HTTP/3 服务，无需额外多端口或多进程配置，只需确保 SSL 证书合法有效、服务器内核与网络环境支持 QUIC/UDP 多路复用、防火墙开放对应 UDP 端口即可。_</p>\\n</blockquote>"}')}}]);