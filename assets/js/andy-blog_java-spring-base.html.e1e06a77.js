"use strict";(self.webpackChunkandy_blogs=self.webpackChunkandy_blogs||[]).push([[3208],{7150:(n,s,a)=>{a.r(s),a.d(s,{comp:()=>c,data:()=>i});var e=a(2565);const p={class:"table-of-contents"},t={},c=(0,a(7459).A)(t,[["render",function(n,s){const a=(0,e.g2)("router-link");return(0,e.uX)(),(0,e.CE)("div",null,[s[5]||(s[5]=(0,e.Lk)("h1",{id:"java-spring-base",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#java-spring-base"},[(0,e.Lk)("span",null,"java-spring-base")])],-1)),(0,e.Lk)("nav",p,[(0,e.Lk)("ul",null,[(0,e.Lk)("li",null,[(0,e.bF)(a,{to:"#spring"},{default:(0,e.k6)(()=>[...s[0]||(s[0]=[(0,e.eW)("spring",-1)])]),_:1})]),(0,e.Lk)("li",null,[(0,e.bF)(a,{to:"#spring-mvc"},{default:(0,e.k6)(()=>[...s[1]||(s[1]=[(0,e.eW)("spring-mvc",-1)])]),_:1})]),(0,e.Lk)("li",null,[(0,e.bF)(a,{to:"#webflux"},{default:(0,e.k6)(()=>[...s[2]||(s[2]=[(0,e.eW)("webflux",-1)])]),_:1})]),(0,e.Lk)("li",null,[(0,e.bF)(a,{to:"#spring-boot"},{default:(0,e.k6)(()=>[...s[3]||(s[3]=[(0,e.eW)("spring-boot",-1)])]),_:1}),(0,e.Lk)("ul",null,[(0,e.Lk)("li",null,[(0,e.bF)(a,{to:"#spring-boot-与-datasource"},{default:(0,e.k6)(()=>[...s[4]||(s[4]=[(0,e.eW)("spring-boot 与 datasource",-1)])]),_:1})])])])])]),s[6]||(s[6]=(0,e.Fv)('<h2 id="spring" tabindex="-1"><a class="header-anchor" href="#spring"><span>spring</span></a></h2><h2 id="spring-mvc" tabindex="-1"><a class="header-anchor" href="#spring-mvc"><span>spring-mvc</span></a></h2><h4 id="spring-mvc-的http版本" tabindex="-1"><a class="header-anchor" href="#spring-mvc-的http版本"><span>spring mvc 的http版本</span></a></h4><blockquote><p>Spring MVC 作为基于 Servlet 规范实现的 Java Web MVC 框架，其核心定位是处理 Web 请求的业务逻辑分发与处理，本身并不直接绑定或实现任何 HTTP 协议版本（如 HTTP/1.1、HTTP/2、HTTP/3）。日常开发中我们的接口默认使用 HTTP/1.1 协议，本质是因为 Spring MVC 通常部署在 Tomcat、Jetty 等主流 Web 容器上，而这些容器默认启用 HTTP/1.1 协议支持；但 Spring MVC 自身不限制协议版本，只要底层 Web 容器（如 Tomcat 8.5+ 支持 HTTP/2、Tomcat 10.1+ 实验性支持 HTTP/3）提供对应协议的实现，Spring MVC 开发的接口即可无缝适配 HTTP/2、HTTP/3 等更高版本的协议。简言之，Spring MVC 接口所使用的 HTTP 协议版本，由其运行的 Web 容器决定，而非框架本身。</p></blockquote><h2 id="webflux" tabindex="-1"><a class="header-anchor" href="#webflux"><span>webflux</span></a></h2><h2 id="spring-boot" tabindex="-1"><a class="header-anchor" href="#spring-boot"><span>spring-boot</span></a></h2><h3 id="spring-boot-与-datasource" tabindex="-1"><a class="header-anchor" href="#spring-boot-与-datasource"><span>spring-boot 与 datasource</span></a></h3><h4 id="多数据源自定义配置示例" tabindex="-1"><a class="header-anchor" href="#多数据源自定义配置示例"><span>多数据源自定义配置示例</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token comment">// DataSourceConfig.java</span></span>\n<span class="line"></span>\n<span class="line"><span class="token annotation punctuation">@Configuration</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataSourceConfig</span> <span class="token punctuation">{</span></span>\n<span class="line"></span>\n<span class="line">    <span class="token doc-comment comment">/**</span>\n<span class="line">     * 创建 orders 数据源的配置对象</span>\n<span class="line">     */</span></span>\n<span class="line">    <span class="token annotation punctuation">@Primary</span></span>\n<span class="line">    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;ordersDataSourceProperties&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.orders&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 读取 spring.datasource.orders 配置到 DataSourceProperties 对象</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token class-name">DataSourceProperties</span> <span class="token function">ordersDataSourceProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">    <span class="token doc-comment comment">/**</span>\n<span class="line">     * 创建 orders 数据源</span>\n<span class="line">     */</span></span>\n<span class="line">    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;ordersDataSource&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.orders.hikari&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 读取 spring.datasource.orders 配置到 HikariDataSource 对象</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">ordersDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token comment">// &lt;1.1&gt; 获得 DataSourceProperties 对象</span></span>\n<span class="line">        <span class="token class-name">DataSourceProperties</span> properties <span class="token operator">=</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ordersDataSourceProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token comment">// &lt;1.2&gt; 创建 HikariDataSource 对象</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token function">createHikariDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">    <span class="token doc-comment comment">/**</span>\n<span class="line">     * 创建 users 数据源的配置对象</span>\n<span class="line">     */</span></span>\n<span class="line">    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;usersDataSourceProperties&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.users&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 读取 spring.datasource.users 配置到 DataSourceProperties 对象</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token class-name">DataSourceProperties</span> <span class="token function">usersDataSourceProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">    <span class="token doc-comment comment">/**</span>\n<span class="line">     * 创建 users 数据源</span>\n<span class="line">     */</span></span>\n<span class="line">    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;usersDataSource&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.users.hikari&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">usersDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token comment">// 获得 DataSourceProperties 对象</span></span>\n<span class="line">        <span class="token class-name">DataSourceProperties</span> properties <span class="token operator">=</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">usersDataSourceProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token comment">// 创建 HikariDataSource 对象</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token function">createHikariDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HikariDataSource</span> <span class="token function">createHikariDataSource</span><span class="token punctuation">(</span><span class="token class-name">DataSourceProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token comment">// 创建 HikariDataSource 对象</span></span>\n<span class="line">        <span class="token class-name">HikariDataSource</span> dataSource <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">initializeDataSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token class-name">HikariDataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token comment">// 设置线程池名</span></span>\n<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">            dataSource<span class="token punctuation">.</span><span class="token function">setPoolName</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token punctuation">}</span></span>\n<span class="line">        <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',9))])}]]),i=JSON.parse('{"path":"/andy-blog/java-spring-base.html","title":"java-spring-base","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"spring","slug":"spring","link":"#spring","children":[]},{"level":2,"title":"spring-mvc","slug":"spring-mvc","link":"#spring-mvc","children":[]},{"level":2,"title":"webflux","slug":"webflux","link":"#webflux","children":[]},{"level":2,"title":"spring-boot","slug":"spring-boot","link":"#spring-boot","children":[{"level":3,"title":"spring-boot 与 datasource","slug":"spring-boot-与-datasource","link":"#spring-boot-与-datasource","children":[]}]}],"git":{"updatedTime":1770783972000,"contributors":[{"name":"xiang.han","username":"","email":"839462320@qq.com","commits":5}],"changelog":[{"hash":"6b50ba31320f825940921fc7f0a3ac2ab0762f10","time":1770783972000,"email":"839462320@qq.com","author":"xiang.han","message":"docs(spring-boot): 添加多数据源自定义配置示例"},{"hash":"687df4431b807427b49b95ccd1f7a5857f76a16f","time":1770387612000,"email":"839462320@qq.com","author":"xiang.han","message":"docs(andy-blog): 更新spring mvc http版本相关文档"},{"hash":"5e2a1a30a4c8c6662707ed0e88f179eb518f2cce","time":1770386294000,"email":"839462320@qq.com","author":"xiang.han","message":"docs(andy-blog): 重命名java-spring文档文件"},{"hash":"fe5ff9837f3eca2e01227f5d3aba2a013b6f857f","time":1770386263000,"email":"839462320@qq.com","author":"xiang.han","message":"docs(blog): 添加 webflux 章节标题"},{"hash":"8b897ca8efa1ee42bdc7a7b6faa66a989abcb06c","time":1770386151000,"email":"839462320@qq.com","author":"xiang.han","message":"docs(blog): 添加 java-spring 技术博客文档"}]},"filePathRelative":"andy-blog/java-spring-base.md","excerpt":"\\n\\n<h2>spring</h2>\\n<h2>spring-mvc</h2>\\n<h4>spring mvc 的http版本</h4>\\n<blockquote>\\n<p>Spring MVC 作为基于 Servlet 规范实现的 Java Web MVC 框架，其核心定位是处理 Web 请求的业务逻辑分发与处理，本身并不直接绑定或实现任何 HTTP 协议版本（如 HTTP/1.1、HTTP/2、HTTP/3）。日常开发中我们的接口默认使用 HTTP/1.1 协议，本质是因为 Spring MVC 通常部署在 Tomcat、Jetty 等主流 Web 容器上，而这些容器默认启用 HTTP/1.1 协议支持；但 Spring MVC 自身不限制协议版本，只要底层 Web 容器（如 Tomcat 8.5+ 支持 HTTP/2、Tomcat 10.1+ 实验性支持 HTTP/3）提供对应协议的实现，Spring MVC 开发的接口即可无缝适配 HTTP/2、HTTP/3 等更高版本的协议。简言之，Spring MVC 接口所使用的 HTTP 协议版本，由其运行的 Web 容器决定，而非框架本身。</p>\\n</blockquote>"}')}}]);