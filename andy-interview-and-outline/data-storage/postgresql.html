<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>postgresql | VuePress</title><meta name="description" content="My first VuePress Site">
    <link rel="stylesheet" href="/AndyBlog/assets/css/styles.f10c3395.css">
    <link rel="preload" href="/AndyBlog/assets/js/runtime~app.386048c8.js" as="script"><link rel="preload" href="/AndyBlog/assets/css/styles.f10c3395.css" as="style"><link rel="preload" href="/AndyBlog/assets/js/933.074b0ba1.js" as="script"><link rel="preload" href="/AndyBlog/assets/js/app.a477e9c2.js" as="script">
    <link rel="prefetch" href="/AndyBlog/assets/js/andy-notes_softeware_SoftwareInstallInMint.html.c5ee1731.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-interview-and-outline_data-storage_postgresql.html.05372d78.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-notes_code-pit-diary_JUC系列.html.5831c7e2.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-interview-and-outline_ai_numpy和pandas.html.d0292dfa.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-notes_softeware_WorkSoftwareUsage.html.f3072746.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-interview-and-outline_ai_python_python-base.html.16b5ccf4.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-notes_code-pit-diary_Mybatis系列.html.f2099f1c.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-notes_code-pit-diary_SQLite.html.b4aa536f.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-notes_code-pit-diary_JPA.html.a23fa73b.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_sticky2.html.83cc104c.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_archive2.html.d128346a.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_archive1.html.7c5aff6c.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article10.html.f9654ae4.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article12.html.011e0fae.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article11.html.22008837.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article3.html.67bcfe5c.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article4.html.618e44e7.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article5.html.081ae9c4.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article6.html.5e629dc0.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article7.html.a5c66c9b.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article8.html.f1f0c51b.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article9.html.981179a7.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article1.html.e8839bbb.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_article2.html.7ae312a3.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/posts_sticky.html.951ed643.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/index.html.9be50c1b.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-notes_back-end_java_JacksonJournal.html.0fe0e2cb.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-notes_code-pit-diary_Spring系列.html.a3f878bd.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/get-started.html.951a4a57.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-interview-and-outline_ai_python_fastapi.html.2df1db77.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/andy-interview-and-outline_ai_langchain_langchain-python.html.d43c89a8.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/test-env.html.b704292c.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/category_category-a_index.html.a089dfe6.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/category_category-b_index.html.ab58fe7c.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/category_category-c_index.html.94577837.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/category_history_index.html.4301d576.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/tag_tag-a_index.html.6d6e6a84.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/tag_tag-d_index.html.6563b0d4.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/tag_tag-e_index.html.8b3cd402.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/tag_tag-b_index.html.4c3e17e6.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/tag_tag-c_index.html.c5882cdc.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/category_index.html.74f6cb4f.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/tag_wwii_index.html.ceffe159.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/tag_wwi_index.html.4eaa226f.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/404.html.83462af6.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/timeline_index.html.df281e17.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/article_index.html.f58d0500.js" as="script"><link rel="prefetch" href="/AndyBlog/assets/js/tag_index.html.72c51f01.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/AndyBlog/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="VuePress"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">VuePress</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/" aria-label="/"><!--[--><!--[--><!--]--><!--]-->/<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/article/" aria-label="Article"><!--[--><!--[--><!--]--><!--]-->Article<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/category/" aria-label="Category"><!--[--><!--[--><!--]--><!--]-->Category<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/tag/" aria-label="Tag"><!--[--><!--[--><!--]--><!--]-->Tag<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/timeline/" aria-label="Timeline"><!--[--><!--[--><!--]--><!--]-->Timeline<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/andy-interview-outline/" aria-label="andy-interview-outline"><!--[--><!--[--><!--]--><!--]-->andy-interview-outline<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/java/" aria-label="java"><!--[--><!--[--><!--]--><!--]-->java<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/linux/" aria-label="linux"><!--[--><!--[--><!--]--><!--]-->linux<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/code-pit-diary/" aria-label="code-pit-diary"><!--[--><!--[--><!--]--><!--]-->code-pit-diary<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/" aria-label="/"><!--[--><!--[--><!--]--><!--]-->/<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/article/" aria-label="Article"><!--[--><!--[--><!--]--><!--]-->Article<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/category/" aria-label="Category"><!--[--><!--[--><!--]--><!--]-->Category<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/tag/" aria-label="Tag"><!--[--><!--[--><!--]--><!--]-->Tag<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/timeline/" aria-label="Timeline"><!--[--><!--[--><!--]--><!--]-->Timeline<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/andy-interview-outline/" aria-label="andy-interview-outline"><!--[--><!--[--><!--]--><!--]-->andy-interview-outline<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/java/" aria-label="java"><!--[--><!--[--><!--]--><!--]-->java<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/linux/" aria-label="linux"><!--[--><!--[--><!--]--><!--]-->linux<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/AndyBlog/code-pit-diary/" aria-label="code-pit-diary"><!--[--><!--[--><!--]--><!--]-->code-pit-diary<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">postgresql <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="postgresql" tabindex="-1"><a class="header-anchor" href="#postgresql"><span>postgresql</span></a></h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/AndyBlog/andy-interview-and-outline/data-storage/postgresql.html#数据类型" class="router-link-active router-link-exact-active">数据类型</a></li><li><a aria-current="page" href="/AndyBlog/andy-interview-and-outline/data-storage/postgresql.html#索引" class="router-link-active router-link-exact-active">索引</a></li><li><a aria-current="page" href="/AndyBlog/andy-interview-and-outline/data-storage/postgresql.html#全文检索" class="router-link-active router-link-exact-active">全文检索</a></li><li><a aria-current="page" href="/AndyBlog/andy-interview-and-outline/data-storage/postgresql.html#并行查询" class="router-link-active router-link-exact-active">并行查询</a></li><li><a aria-current="page" href="/AndyBlog/andy-interview-and-outline/data-storage/postgresql.html#规则系统" class="router-link-active router-link-exact-active">规则系统</a></li><li><a aria-current="page" href="/AndyBlog/andy-interview-and-outline/data-storage/postgresql.html#pg的mvcc" class="router-link-active router-link-exact-active">PG的MVCC</a></li></ul></nav><p>[toc]</p><h2 id="数据类型" tabindex="-1"><a class="header-anchor" href="#数据类型"><span>数据类型</span></a></h2><h4 id="tsvector-类型" tabindex="-1"><a class="header-anchor" href="#tsvector-类型"><span>tsvector 类型</span></a></h4><p>tsquery 类型</p><h2 id="索引" tabindex="-1"><a class="header-anchor" href="#索引"><span>索引</span></a></h2><h4 id="postgresql-中的" tabindex="-1"><a class="header-anchor" href="#postgresql-中的"><span>PostgreSQL 中的</span></a></h4><p><code>函数索引（也叫表达式索引）</code> 是基于列的计算结果 / 函数调用结果创建的索引，而非列本身的值，解决了 “WHERE/HAVING/ORDER BY 中使用列表达式 / 函数时普通索引失效” 的问题（是！）</p><h4 id="postgresql索引的键除了可以是一个函数外-还可以是从一个或多个字段计算出来的标量表达式-是" tabindex="-1"><a class="header-anchor" href="#postgresql索引的键除了可以是一个函数外-还可以是从一个或多个字段计算出来的标量表达式-是"><span>PostgreSQL索引的键除了可以是<code>一个函数</code>外，还可以是从一个或多个字段计算出来的<code>标量表达式</code>（是！）</span></a></h4><h4 id="pg" tabindex="-1"><a class="header-anchor" href="#pg"><span>PG</span></a></h4><p><code>函数索引适用</code>引常见场景：如 1.字段格式化、转换后的查询；2.复合表达式计算后的查询；3.空值 / 非空值的精准过滤;枚举值 / 状态的衍生计算;4.空间数据 / JSON 字段的提取查询等等（是！）</p><h4 id="pg-1" tabindex="-1"><a class="header-anchor" href="#pg-1"><span>PG</span></a></h4><p><code>函数索引不适用</code>的常见场景：1. 函数 / 表达式结果高度离散；2.函数 / 表达式结果低基数 3. 频繁更新的字段 4. 函数包含不确定 / 动态值 5. 小表，数据量极小 6. 函数 / 表达式复杂且计算成本高（是！）</p><h4 id="postgresql的部分索引是只对一个表中的部分行进行的索引-是由一个条件表达式把这部分行筛选出来-该条件表达式被称为部分索引的谓词-只对筛选出来的数据创建索引-是" tabindex="-1"><a class="header-anchor" href="#postgresql的部分索引是只对一个表中的部分行进行的索引-是由一个条件表达式把这部分行筛选出来-该条件表达式被称为部分索引的谓词-只对筛选出来的数据创建索引-是"><span>PostGreSQL的<code>部分索引是只对一个表中的部分行进行的索引</code>，是由一个条件表达式把这部分行筛选出来（该条件表达式被称为部分索引的谓词），只对筛选出来的数据创建索引（是！）</span></a></h4><h4 id="postgresql支持带任意谓词的部分索引-但是" tabindex="-1"><a class="header-anchor" href="#postgresql支持带任意谓词的部分索引-但是"><span>PostgreSQL支持带任意谓词的部分索引，但是</span></a></h4><p><code>只有在系统能够识别出该查询的WHERE条件简单地包含了该索引的谓词时，这个部分索引才能用于该查询</code>。PostgreSQL不能完全识别那些形式不同但数学上意义相等的谓词（是！）</p><h4 id="pg支持设置部分唯一索引-即全局不唯一-但是筛选条件下唯一-是" tabindex="-1"><a class="header-anchor" href="#pg支持设置部分唯一索引-即全局不唯一-但是筛选条件下唯一-是"><span>PG支持设置<code>部分唯一索引</code>，即全局不唯一，但是筛选条件下唯一（是！）</span></a></h4><h4 id="postgresql支持在任意数据类型上建立btree索引-但是btree索引只支持范围谓词-hash索引仅支持相等查询-而gist的索引还能支持包含-、重叠-等复杂运算-是" tabindex="-1"><a class="header-anchor" href="#postgresql支持在任意数据类型上建立btree索引-但是btree索引只支持范围谓词-hash索引仅支持相等查询-而gist的索引还能支持包含-、重叠-等复杂运算-是"><span>PostgreSQL支持在任意数据类型上建立BTree索引，但是BTree索引只支持范围谓词(&lt;,=, &gt;)，HASH索引仅支持相等查询，而GiST的索引还能支持包含(@&gt;)、重叠(&amp;&amp;)等复杂运算（是！）</span></a></h4><h4 id="在-postgresql-中-不指定索引类型时-默认创建的是-b-树-b-tree-索引-严格来说是-b-树的变体-postgresql-官方文档统一称-b-tree-是" tabindex="-1"><a class="header-anchor" href="#在-postgresql-中-不指定索引类型时-默认创建的是-b-树-b-tree-索引-严格来说是-b-树的变体-postgresql-官方文档统一称-b-tree-是"><span>在 PostgreSQL 中，不指定索引类型时，默认创建的是 B 树（B-tree）索引（严格来说是 B+ 树的变体，PostgreSQL 官方文档统一称 B-tree）（是！）</span></a></h4><h4 id="postgresql-的-create-index-语法中-若" tabindex="-1"><a class="header-anchor" href="#postgresql-的-create-index-语法中-若"><span>PostgreSQL 的 CREATE INDEX 语法中，若</span></a></h4><p><code>省略 USING</code> 子句指定索引类型，数据库会根据索引字段的数据类型和使用场*默认选择 B-tree 索引（是！）</p><h4 id="postgresql-显式指定创建-b-树-b-树-索引-需通过-using-btree-子句明确声明-这是最规范的写法-是" tabindex="-1"><a class="header-anchor" href="#postgresql-显式指定创建-b-树-b-树-索引-需通过-using-btree-子句明确声明-这是最规范的写法-是"><span>PostgreSQL <code>显式指定创建 B 树（B+ 树）索引，需通过 USING btree</code> 子句明确声明，这是最规范的写法(是！)</span></a></h4><h4 id="gist的索引的创建" tabindex="-1"><a class="header-anchor" href="#gist的索引的创建"><span>GiST的索引的创建</span></a></h4><h4 id="sp-gist即空间分区gist索引-通常用于多重空间-它主要是通过一些新的索引算法提高gist索引在某种情况下的性能-是" tabindex="-1"><a class="header-anchor" href="#sp-gist即空间分区gist索引-通常用于多重空间-它主要是通过一些新的索引算法提高gist索引在某种情况下的性能-是"><span><code>SP-GiST即空间分区GiST索引</code>（通常用于多重空间），它主要是通过一些新的索引算法提高GiST索引在某种情况下的性能（是！）</span></a></h4><h4 id="sp-gist索引的创建" tabindex="-1"><a class="header-anchor" href="#sp-gist索引的创建"><span>SP-GiST索引的创建</span></a></h4><h4 id="gin索引是即广义倒排索引。通常gin索引作为全文检索使用-即在文章中搜索指定的词。gin索引中存储了一系列-key-位置列表-对-位置列表中存储了包含此key值的行的列表。同一行的rowid会出现在多个位置列表中。" tabindex="-1"><a class="header-anchor" href="#gin索引是即广义倒排索引。通常gin索引作为全文检索使用-即在文章中搜索指定的词。gin索引中存储了一系列-key-位置列表-对-位置列表中存储了包含此key值的行的列表。同一行的rowid会出现在多个位置列表中。"><span>GIN索引是即广义倒排索引。通常GIN索引作为全文检索使用，即在文章中搜索指定的词。GIN索引中存储了一系列“key，位置列表”对，位置列表中存储了包含此key值的行的列表。同一行的rowid会出现在多个位置列表中。</span></a></h4><h4 id="gin索引创建" tabindex="-1"><a class="header-anchor" href="#gin索引创建"><span>GIN索引创建</span></a></h4><h4 id="gin索引可以结合-tsvector-类型使用-加快全文检索-是" tabindex="-1"><a class="header-anchor" href="#gin索引可以结合-tsvector-类型使用-加快全文检索-是"><span>GIN索引可以结合 tsvector 类型使用，加快全文检索（是！）</span></a></h4><h4 id="gin索引对于插入更新操作效率比较低-如果要向一张表中插入大量数据-最好先把gin索引删除-然后插入数据-最后再把gin索引重新建起来-把maintenance-work-mem参数调大-可以更快地完成gin索引的创建工作。-是" tabindex="-1"><a class="header-anchor" href="#gin索引对于插入更新操作效率比较低-如果要向一张表中插入大量数据-最好先把gin索引删除-然后插入数据-最后再把gin索引重新建起来-把maintenance-work-mem参数调大-可以更快地完成gin索引的创建工作。-是"><span>GIN索引对于插入更新操作效率比较低，如果要向一张表中插入大量数据，最好先把GIN索引删除，然后插入数据，最后再把GIN索引重新建起来，把maintenance_work_mem参数调大，可以更快地完成GIN索引的创建工作。（是）</span></a></h4><h4 id="brin索引-todo" tabindex="-1"><a class="header-anchor" href="#brin索引-todo"><span>BRIN索引(<code>todo！</code>)</span></a></h4><h2 id="全文检索" tabindex="-1"><a class="header-anchor" href="#全文检索"><span>全文检索</span></a></h2><h4 id="postgresql内置了全文检索功能-但内置的功能只能检索英文。当然-配置一些插件如-zhparser-也可以对中文进行全文检索-是" tabindex="-1"><a class="header-anchor" href="#postgresql内置了全文检索功能-但内置的功能只能检索英文。当然-配置一些插件如-zhparser-也可以对中文进行全文检索-是"><span>PostgreSQL内置了全文检索功能，但内置的功能只能检索英文。当然，配置一些插件如 zhparser 也可以对中文进行全文检索(是)</span></a></h4><h4 id="安装-zhparser-插件实现中文检索-todo" tabindex="-1"><a class="header-anchor" href="#安装-zhparser-插件实现中文检索-todo"><span>安装 zhparser 插件实现中文检索（<code>todo!</code>）</span></a></h4><h4 id="安装-pg-jieba-分词插件-实现中文检索-todo" tabindex="-1"><a class="header-anchor" href="#安装-pg-jieba-分词插件-实现中文检索-todo"><span>安装 pg_jieba 分词插件 实现中文检索（<code>todo!</code>）</span></a></h4><h4 id="g-jieba-对中文的支持显著优于-zhparser——-尤其是在分词精度、功能丰富度、自定义能力等核心维度-pg-jieba-是-postgresql-生态中目前最优的中文分词扩展之一-是" tabindex="-1"><a class="header-anchor" href="#g-jieba-对中文的支持显著优于-zhparser——-尤其是在分词精度、功能丰富度、自定义能力等核心维度-pg-jieba-是-postgresql-生态中目前最优的中文分词扩展之一-是"><span>g_jieba 对中文的支持显著优于 zhparser—— 尤其是在分词精度、功能丰富度、自定义能力等核心维度，pg_jieba 是 PostgreSQL 生态中目前最优的中文分词扩展之一（是！）</span></a></h4><h4 id="postgresql把长文本分解成很多token的集合-这个token集合叫tsvector-代表了文档-搜索实际上是在token集合中进行的" tabindex="-1"><a class="header-anchor" href="#postgresql把长文本分解成很多token的集合-这个token集合叫tsvector-代表了文档-搜索实际上是在token集合中进行的"><span>PostgreSQL把长文本分解成很多token的集合，这个token集合叫tsvector，代表了文档，搜索实际上是在token集合中进行的</span></a></h4><h4 id="to-tsvector-是-postgresql-中核心的全文检索函数-用于将普通文本-text-类型-转换为优化后的-tsvector-类型数据-是" tabindex="-1"><a class="header-anchor" href="#to-tsvector-是-postgresql-中核心的全文检索函数-用于将普通文本-text-类型-转换为优化后的-tsvector-类型数据-是"><span><code>to_tsvector </code>是 PostgreSQL 中核心的全文检索函数，用于将普通文本（text 类型）转换为优化后的 tsvector 类型数据（是！）</span></a></h4><h4 id="postgresql增加了一个检索条件的类型-tsquery-tsquery是一个由简单逻辑运行符号组成的字符串-postgresql也提供了函数-to-tsquery-来实现这个转换-是" tabindex="-1"><a class="header-anchor" href="#postgresql增加了一个检索条件的类型-tsquery-tsquery是一个由简单逻辑运行符号组成的字符串-postgresql也提供了函数-to-tsquery-来实现这个转换-是"><span>PostgreSQL增加了一个检索条件的类型“tsquery”，tsquery是一个由简单逻辑运行符号组成的字符串，PostgreSQL也提供了函数“to_tsquery”来实现这个转换（是！）</span></a></h4><h4 id="postgresql全文检索的搜索过程实际上使用一个tsvector和tsquery进行匹配-tsvector代表了文档-而tsquery代表了检索条件-匹配的运算符是-是" tabindex="-1"><a class="header-anchor" href="#postgresql全文检索的搜索过程实际上使用一个tsvector和tsquery进行匹配-tsvector代表了文档-而tsquery代表了检索条件-匹配的运算符是-是"><span>PostgreSQL全文检索的搜索过程实际上使用一个tsvector和tsquery进行匹配，tsvector代表了文档，而tsquery代表了检索条件，匹配的运算符是&quot;@@&quot;（是！）</span></a></h4><h4 id="基于tsvector做全文检索时一般都要结合gin索引加快扫描-是" tabindex="-1"><a class="header-anchor" href="#基于tsvector做全文检索时一般都要结合gin索引加快扫描-是"><span>基于tsvector做全文检索时一般都要结合GIN索引加快扫描（是！）</span></a></h4><h2 id="并行查询" tabindex="-1"><a class="header-anchor" href="#并行查询"><span>并行查询</span></a></h2><h4 id="postgresql并行查询相关的配置参数" tabindex="-1"><a class="header-anchor" href="#postgresql并行查询相关的配置参数"><span>PostgreSQL并行查询相关的配置参数</span></a></h4><h4 id="postgresql支持的并行操作" tabindex="-1"><a class="header-anchor" href="#postgresql支持的并行操作"><span>PostgreSQL支持的并行操作</span></a></h4><h2 id="规则系统" tabindex="-1"><a class="header-anchor" href="#规则系统"><span>规则系统</span></a></h2><h4 id="postgresql的视图是通过select规则来实现的-是" tabindex="-1"><a class="header-anchor" href="#postgresql的视图是通过select规则来实现的-是"><span>PostgreSQL的视图是通过SELECT规则来实现的(是！)</span></a></h4><h4 id="select规则的后续动作只能是instead-select-即只能用另一个select语句取代-是" tabindex="-1"><a class="header-anchor" href="#select规则的后续动作只能是instead-select-即只能用另一个select语句取代-是"><span>SELECT规则的后续动作只能是INSTEAD SELECT，即只能用另一个SELECT语句取代（是！）</span></a></h4><h4 id="select规则的名称只能是-return" tabindex="-1"><a class="header-anchor" href="#select规则的名称只能是-return"><span>SELECT规则的名称只能是“_RETURN”</span></a></h4><h4 id="创建规则的-语法" tabindex="-1"><a class="header-anchor" href="#创建规则的-语法"><span>创建规则的 语法</span></a></h4><h4 id="规则-rule-是从属于表或视图的。如果一张表属于一个用户-则这张表上的所有规则都是属于这个用户的。在规则系统中检测权限时-是对规则的属主进行权限检查-而不是执行规则的用户-是" tabindex="-1"><a class="header-anchor" href="#规则-rule-是从属于表或视图的。如果一张表属于一个用户-则这张表上的所有规则都是属于这个用户的。在规则系统中检测权限时-是对规则的属主进行权限检查-而不是执行规则的用户-是"><span>规则(RULE)是从属于表或视图的。如果一张表属于一个用户，则这张表上的所有规则都是属于这个用户的。在规则系统中检测权限时，是对规则的属主进行权限检查，而不是执行规则的用户(是)</span></a></h4><h4 id="触发器能做的很多事情使用postgresql的规则系统也可以完成-使用哪种方法取决于具体的应用场景。规则系统是通过查询重写来实现的-而触发器通常是为每个行都触发执行一次-所以对于批量操作-使用规则可能会生成更好的执行计划-从而效率更高一些。是" tabindex="-1"><a class="header-anchor" href="#触发器能做的很多事情使用postgresql的规则系统也可以完成-使用哪种方法取决于具体的应用场景。规则系统是通过查询重写来实现的-而触发器通常是为每个行都触发执行一次-所以对于批量操作-使用规则可能会生成更好的执行计划-从而效率更高一些。是"><span>触发器能做的很多事情使用PostgreSQL的规则系统也可以完成，使用哪种方法取决于具体的应用场景。规则系统是通过查询重写来实现的，而触发器通常是为每个行都触发执行一次，所以对于批量操作，使用规则可能会生成更好的执行计划，从而效率更高一些。是）</span></a></h4><h4 id="触发器和规则选型和适用-todo" tabindex="-1"><a class="header-anchor" href="#触发器和规则选型和适用-todo"><span>触发器和规则选型和适用（<code>todo！</code>）</span></a></h4><h2 id="pg的mvcc" tabindex="-1"><a class="header-anchor" href="#pg的mvcc"><span>PG的MVCC</span></a></h2></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated:: </span><time class="meta-item-info" datetime="2025-12-20T09:01:41.000Z" data-allow-mismatch>12/20/25, 9:01 AM</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 839462320@qq.com">xiang.han</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 839462320@qq.com">WhaleFall</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/AndyBlog/assets/js/runtime~app.386048c8.js" defer></script><script src="/AndyBlog/assets/js/933.074b0ba1.js" defer></script><script src="/AndyBlog/assets/js/app.a477e9c2.js" defer></script>
  </body>
</html>
